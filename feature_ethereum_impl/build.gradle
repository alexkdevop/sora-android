apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: "kotlin-kapt"
apply from: '../tests.gradle'

android {
    compileSdkVersion compileVersion

    defaultConfig {
        minSdkVersion minVersion
        targetSdkVersion targetVersion
        versionCode appVersionCode
        versionName appVersionName
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_1_8.toString()
    }

    flavorDimensions "default"

    productFlavors {
        develop {
            buildConfigField "String", "ETH_HOST_URL", "\"https://ropsten.infura.io/v3/6b7733290b9a4156bf62a4ba105b76ec\""
            buildConfigField "String", "MASTER_CONTRACT_ADDRESS", "\"0x9d4ca2af7cc11638d47997c8c5f82b9d53cc4ce5\""
            dimension 'default'
        }

        tst {
            buildConfigField "String", "ETH_HOST_URL", "\"https://rinkeby.infura.io/v3/d474ba6eb5ae4552bd4c26d460a135a2\""
            buildConfigField "String", "MASTER_CONTRACT_ADDRESS", "\"0xbbf10481398c7110d8d0640e8c56afcb8ad43a62\""
            dimension 'default'
        }

        staging {
            buildConfigField "String", "ETH_HOST_URL", "\"https://rinkeby.infura.io/v3/d474ba6eb5ae4552bd4c26d460a135a2\""
            buildConfigField "String", "MASTER_CONTRACT_ADDRESS", "\"0x27ed23f7bbb76eb8d461a6361704bda12a2669e2\""
            dimension 'default'
        }

        production {
            buildConfigField "String", "ETH_HOST_URL", "\"https://parity-mainnet-open.s0.dev.soranet.soramitsu.co.jp\""
            buildConfigField "String", "MASTER_CONTRACT_ADDRESS", "\"0xc08edf13be9b9cc584c5da8004ce7e6be63c1316\""
            buildConfigField "String", "FEE_CALCULATION_ADDRESS", "\"0x43fd5530789ce64a6569d882cfdfa07c7ed33be6\""
            dimension 'default'
        }
    }
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation project(":common")
    implementation project(":core_di")
    implementation project(":core_db")
    implementation project(':feature_ethereum_api')
    implementation project(':feature_wallet_api')

    implementation kotlinDep

    implementation daggerDep
    kapt daggerKapt

    implementation rxCallAdapterDep

    implementation soraDep
    implementation birtDep
    implementation web3j
    implementation gsonDep

    implementation rxDep

    implementation irohaDep

    implementation roomDep
    implementation rxRoomDep
    kapt roomKapt

    implementation retrofitDep
    implementation gsonConvertedDep
    implementation rxCallAdapterDep

    implementation workerManagerDep

    implementation(crashlyticsDep) {
        transitive = true
    }

    testImplementation jUnitDep
    testImplementation mockitoDep
    testImplementation robolectricDep
    testImplementation robolectricMultidexDep
    testImplementation archCoreTestDep
    testImplementation archFragmentTestDep
    testImplementation project(":test_shared")
}